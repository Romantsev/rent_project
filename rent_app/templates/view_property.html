{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
   <h2>Property Details</h2>
   <ul class="list-group">
      <li class="list-group-item"><strong>Type:</strong> {{ property.property_type }}</li>
      <li class="list-group-item"><strong>Location:</strong> {{ property.location }}</li>
      <li class="list-group-item"><strong>Area:</strong> {{ property.area }} mÂ²</li>
      <li class="list-group-item"><strong>Rooms:</strong> {{ property.room_count }}</li>
      <li class="list-group-item"><strong>Floor:</strong> {{ property.floor }}</li>
      <li class="list-group-item"><strong>Price:</strong> ${{ property.price }}</li>
      <li class="list-group-item"><strong>Status:</strong> {{ property.status }}</li>
      <li class="list-group-item"><strong>Description:</strong> {{ property.description }}</li>
      
      <li class="list-group-item"><strong>Owner:</strong>
         <a href="{% url 'view_profile' property.user_id %}">{{ property.owner_name }}</a>
      </li>
      <li class="list-group-item"><strong>Developer:</strong>
         <a href="{% url 'view_developer' property.developer_id %}">{{ property.developer_name }}</a>
      </li>

   </ul>

   {% if is_owner %}
   <div class="mt-4">
      <a href="{% url 'edit_property' property.property_id %}" class="btn btn-warning">Edit</a>
      <a href="{% url 'delete_property' property.property_id %}" class="btn btn-danger"
         onclick="return confirm('Are you sure you want to delete this property?');">Delete</a>
   </div>
   {% endif %}

   <hr class="my-4">
   {% if is_owner %}
   <a href="{% url 'add_inspection' property.property_id  %}" class="btn btn-outline-success mb-3">Add Inspection</a>
   {% endif %}

   {% if inspections %}
   <table class="table table-striped">
      <thead>
         <tr>
            <th>Date</th>
            <th>Condition</th>
            {% if is_owner %}<th>Actions</th>{% endif %}
         </tr>
      </thead>
      <tbody>
         {% for inspection in inspections %}
         <tr>
            <td>{{ inspection.0 }}</td>
            <td>{{ inspection.1 }}</td>
            {% if is_owner %}
            <td>
               <a href="{% url 'edit_inspection' forloop.counter0|add:1 %}"
                  class="btn btn-sm btn-outline-warning">Edit</a>
               <a href="{% url 'delete_inspection' forloop.counter0|add:1 %}" class="btn btn-sm btn-outline-danger"
                  onclick="return confirm('Are you sure you want to delete this inspection?');">Delete</a>
            </td>
            {% endif %}
         </tr>
         {% endfor %}
      </tbody>
   </table>
   {% endif %}
</div>
{% endblock %}